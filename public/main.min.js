!function(){const n={},t=(t,a)=>n[t]=document.querySelector(a);var a={get t(){return n.t||t("bodyElem","body")},get o(){return n.o||t("navElem","#nav")},get i(){return n.i||t("contentElem","#content")}},e={s:"/404",l:"content",u:!0,v:"fade",m:320,h:"/nav",g:"/index"},o={p:"active-link"};const r=n=>n.replace(/^\/+/i,"");var i=r,s=async n=>new Promise(t=>setTimeout(t,n)),c=n=>n.indexOf("://")<1&&0!==n.indexOf("//"),l=()=>window.navigator.appVersion.includes("Mac"),d=n=>{let t=r(n);return""===t&&(t=e.g),`${e.l}/${t}.html`};var w=(n,t)=>{n.filter(n=>i(n.getAttribute("href"))===i(t)).forEach(n=>{n.classList.add(o.p)}),n.filter(n=>i(n.getAttribute("href"))!==i(t)).forEach(n=>{n.classList.remove(o.p)})};const u=()=>window.location.pathname;var v=u,f=n=>u()===n?void 0:history.pushState("",n,n);var m=async n=>{const t=await fetch(n);if(t.status>=400&&t.status<600)throw new Error("File not found");return await t.text()};const h=n=>{for(;n.firstChild;)n.firstChild.remove()},y=(n,t)=>n.appendChild(t),E=n=>{const t=document.createElement("template");return t.innerHTML=n,t.content.childNodes};var g=(n,t)=>{h(n),E(t).forEach(t=>y(n,t))};const p=async n=>{const t=d(n),o=await m(t).catch(t=>{if(n!==e.s)return p(e.s);throw new Error(t)});o&&(a.t.classList.add(e.v),await s(e.m),g(a.i,o),f(n),a.t.classList.remove(e.v))};var b={content:p,C:async()=>{const n=d(e.h),t=await m(n).catch(n=>{throw new Error(n)});t&&g(a.o,t)}};var C=()=>{const n=performance.now();Promise.all([b.content(v()),b.C()]).then(()=>{w([...a.o.querySelectorAll("a")],v());const t=performance.now()-n;t>4e3?a.t.classList.remove("splash-loading"):setTimeout(()=>{a.t.classList.remove("splash-loading")},4e3-t)})},P=n=>{if(n.clientX&&n.clientY&&a.t.classList.remove("keyboard-nav"),!n.target.matches("a"))return;const t=n.target.getAttribute("href");if(t&&c(t)){const e=l()&&n.metaKey||!l()&&n.ctrlKey,o=n.shiftKey;if(e||o)return;n.preventDefault(),a.o.querySelector("input").checked=!1,b.content(t).then(()=>{w([...a.o.querySelectorAll("a")],v())})}},k=n=>{n.preventDefault(),b.content(v()).then(()=>{w([...a.o.querySelectorAll("a")],v())})},F=n=>{9===n.which&&a.t.classList.add("keyboard-nav"),27===n.which&&a.o.querySelector("input").checked&&(a.o.querySelector("input").checked=!1)};window.onload=C,window.onclick=P,window.onpopstate=k,window.onkeyup=F}();
